{"code":"!function(e){var t={};function r(n){if(t[n])return t[n].exports;var a=t[n]={i:n,l:!1,exports:{}};return e[n].call(a.exports,a,a.exports,r),a.l=!0,a.exports}r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(e,\"__esModule\",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&\"object\"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,\"default\",{enumerable:!0,value:e}),2&t&&\"string\"!=typeof e)for(var a in e)r.d(n,a,function(t){return e[t]}.bind(null,a));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,\"a\",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p=\"\",r(r.s=0)}([function(e,t,r){\"use strict\";let n;r.r(t);const a=()=>{let e=document.querySelectorAll(\".favorite-button\"),t=document.querySelector(\".back\"),r=document.querySelectorAll(\".enter-button\");r&&r.forEach(e=>{e.addEventListener(\"click\",e=>{n=e.target.getAttribute(\"data-id\"),d(`http://www.omdbapi.com/?i=${n}&apikey=d5677312`)})}),e&&e.forEach(e=>{e.addEventListener(\"click\",o)}),t&&t.addEventListener(\"click\",()=>{i(value)})},o=e=>{let t=e.target.getAttribute(\"data-id\");localStorage.length&&localStorage.getItem(t)?(e.target.src=\"img/insert_favorite_button.svg\",localStorage.removeItem(t)):(e.target.src=\"img/remove_favorite_button.svg\",localStorage.setItem(t,!0))},i=e=>{e?l(`http://www.omdbapi.com/?s=${e.split(\" \").join(\"+\")}&apikey=d5677312`):c()},l=async e=>{try{let t,r,n=await fetch(e),o=(await n.json()).Search;if(!o)return document.querySelector(\".results\").innerHTML=\"<p>ничего не найдено</p>\",0;o=o.sort((e,t)=>+t.Year.slice(0,4)-+e.Year.slice(0,4)),document.querySelector(\".results\").innerHTML=\"\",o.forEach(e=>{(t=document.createElement(\"div\")).classList.add(\"res-item\"),r=localStorage.length&&localStorage.getItem(e.imdbID)?\"img/remove_favorite_button.svg\":\"img/insert_favorite_button.svg\",t.innerHTML=`\\n          <img src=\"${\"N/A\"==e.Poster?\"img/black.svg\":e.Poster}\" alt=\"img\" class=\"poster\">\\n          <div class=\"info-movie\">\\n            <h2>${e.Title}</h2>\\n            <p>Type: <mark>${e.Type}</mark> </p>\\n            <p>Year: <mark>${e.Year}</mark> </p>\\n          </div>\\n          <div class=\"res-item-buttons\">\\n            <img src=\"${r}\" alt=\"add to Favorites\" class='favorite-button' data-id='${e.imdbID}'/>\\n            <img src=\"img/enter.svg\" alt=\"More...\" class=\"enter-button\" data-id='${e.imdbID}'>\\n          </div>\\n`,document.querySelector(\".results\").appendChild(t)}),a()}catch(e){console.log(e)}},c=()=>{if(!localStorage.length)return document.querySelector(\".results\").innerHTML=\"<p>У вас нет избранных фильмов</p>\",0;document.querySelector(\".results\").innerHTML=\"\";for(let e in localStorage)\"true\"==localStorage[e]&&s(`http://www.omdbapi.com/?i=${e}&apikey=d5677312`);(()=>{let e=document.querySelectorAll(\".favorite-button\"),t=document.querySelectorAll(\".enter-button\");value=\"\",t&&t.forEach(e=>{e.addEventListener(\"click\",e=>{n=e.target.getAttribute(\"data-id\"),d(`http://www.omdbapi.com/?i=${n}&apikey=d5677312`)})}),e.forEach(e=>{e.addEventListener(\"click\",e=>{let t=e.target.getAttribute(\"data-id\");localStorage.removeItem(t),e.target.parentNode.parentNode.remove(),\"\"==document.querySelector(\".results\").innerHTML&&(document.querySelector(\".results\").innerHTML=\"<p>У вас нет избранных фильмов</p>\")})})})()},s=async e=>{try{let t=await fetch(e),r=await t.json(),n=document.createElement(\"div\");n.classList.add(\"res-item\"),n.innerHTML=`\\n     <img src=\"${\"N/A\"==r.Poster?\"img/black.svg\":r.Poster}\" alt=\"img\" class=\"poster\">\\n     <div class=\"info-movie\">\\n       <h2>${r.Title}</h2>\\n       <p>Type: <mark>${r.Type}</mark> </p>\\n       <p>Year: <mark>${r.Year}</mark> </p>\\n     </div>\\n     <div class=\"res-item-buttons\"'>\\n       <img src=\"img/remove_favorite_button.svg\" alt=\"add to Favorites\" class='favorite-button' data-id='${r.imdbID}'/>\\n       <img src=\"img/enter.svg\" alt=\"More...\" class=\"enter-button\" data-id='${r.imdbID}'>\\n     </div>\\n`,document.querySelector(\".results\").appendChild(n)}catch(e){console.log(e)}},d=async e=>{try{let t,r=await fetch(e),n=await r.json();document.querySelector(\".results\").innerHTML=\"\",t=localStorage.length&&localStorage.getItem(n.imdbID)?\"img/remove_favorite_button.svg\":\"img/insert_favorite_button.svg\";let o=document.createElement(\"div\");o.classList.add(\"page-film\"),o.innerHTML=`\\n    <img src=\"img/enter.svg\" alt=\"back\" class='back'>\\n    <img src=\"${\"N/A\"==n.Poster?\"img/black.svg\":n.Poster}\" alt=\"img\" class=\"poster\">\\n    <img src=\"${t}\"\\n     alt=\"add to Favorites\" class='favorite-button' data-id='${n.imdbID}'/>\\n   <div class=\"info-movie\">\\n     <h2>${n.Title}</h2>\\n     <p>Type: <mark>${n.Type}</mark> </p>\\n     <p>Year: <mark>${n.Year}</mark> </p>\\n     <p>Rated: <mark>${n.Rated}</mark> </p>\\n     <p>Genre: <mark>${n.Genre}</mark> </p>\\n     <p>Runtime: <mark>${n.Runtime}</mark> </p>\\n     <p>Plot: <mark>${n.Plot}</mark> </p>\\n   </div>\\n</div>\\n\\n    `,document.querySelector(\".results\").appendChild(o),a()}catch(e){console.log(e)}};let u,m=document.querySelector(\"form\"),p=document.querySelector(\".favorites-button\");m.addEventListener(\"submit\",e=>{e.preventDefault(),(void 0)(`http://www.omdbapi.com/?s=${(u=document.querySelector(\"input\").value).split(\" \").join(\"+\")}&apikey=d5677312`)}),p.addEventListener(\"click\",c)}]);","extractedComments":[]}